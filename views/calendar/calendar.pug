extends ../layout

block content
  .container
    nav(aria-label="breadcrumb")
      ol.breadcrumb
        li.breadcrumb-item 
          a(href="/") 首頁
        li.breadcrumb-item 行事曆
    #calendar
  script(src="/javascripts/fullcalendar-scheduler-6.1.5/dist/index.global.min.js")
  script(src="/javascripts/fullcalendar-ext/packages/core/locales-all.global.min.js")
  script.
    document.addEventListener('DOMContentLoaded', function() {
      const calendar = new FullCalendar.Calendar(document.getElementById('calendar'), {
        headerToolbar: {
          left: 'today prev,next' ,
          center: 'title' ,
          right: 'resourceTimelineDay,resourceTimelineThreeDays,timeGridWeek,dayGridMonth,listWeek',
        },
        slotMinTime: "08:00:00", //最小開始時間
        slotMaxTime: "22:30:00", //最大開始時間
        slotDuration: "00:10", //時間間隔
        editable: true,       //允許移動
        selectable: true,     //允許選擇
        locale:'zh-tw',       //本地化
        aspectRatio: 1.8,     //長寬比
        initialView: 'resourceTimelineDay', //預設模式
        firstDay: 1, //周的開始
        fixedWeekCount:false,//最多顯示五周
        views: {
          resourceTimelineThreeDays: {
            type: 'resourceTimeline',
            duration: { days: 3 },
            buttonText: '近三天'
          }
        },
        select: arg => {
          console.dir(arg)
        },
        eventClick: arg => {
          console.dir(arg)
        },
        eventChange: arg => {
          console.dir(arg)
        },
        eventRemove: arg => {
          console.dir(arg)
        },
        resourceAreaHeaderContent: '空間名稱',
        resources: '/room'
      });
      
      //calendar.addResource(res.data.Calendardata)

      calendar.addEventSource([
          { id: '1', resourceId: '1', start: '2023-03-31T08:09:00', end: '2023-03-31T15:09:30', title: 'event 1' },
          { id: '2', resourceId: '2', start: '2023-03-31T11:10:00', end: '2023-03-31T06:10:40', title: 'event 2' },
          { id: '3', resourceId: '3', start: '2023-03-30', end: '2023-03-30', title: 'event 3' },
          { id: '4', resourceId: '2', start: '2023-03-31T09:15:00', end: '2023-03-31T14:15:20', title: 'event 4' },
          { id: '5', resourceId: '3', start: '2023-03-31T12:30:00', end: '2023-03-31T12:30:00', title: 'event 5' }
        ])
      calendar.render();
      
    });